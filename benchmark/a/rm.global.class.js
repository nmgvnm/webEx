/*!
 *
 * RemoteMeeting
 *
 * IMPORTANT NOTE: This file is licensed only for use in providing the RSUPPORT services.
 *
 * @license Copyright (c) RSUPPORT CO., LTD. (http://www.rsupport.com/)
 * @author Front-End Team | Jeong Shik Park (jspark@rsupport.com)
 * @author Front-End Team | HEE JIN SHIN (hjshin@rsupport.com)
 * @author Front-End Team | U Chang Heo (ucheo@rsupport.com)
 *
 */
function Util(e){var t,n=this,o=e.lang;n.detect={microphone:function(e){return console.info("detect.microphone",DetectRTC),!(!DetectRTC.isMobileDevice&&DetectRTC.browser.isChrome&&!0!==DetectRTC.hasMicrophone)||(e&&alert($.i18n.RM00214),!1)},webcam:function(){return console.info("detect.webCam",DetectRTC),!(!DetectRTC.isMobileDevice&&DetectRTC.browser.isChrome&&!0!==DetectRTC.hasWebcam)},browser:function(){return t=DetectRTC.browser,t.isWebkit=t.isChrome||t.isSafari,t.isSupportedRM=t.isChrome&&parseInt(t.version,10)>=52||t.isEdge&&Number(t.fullVersion)>=17.17134,t}()},n.platform=function(e){for(var t=0;t<e.length;t++)if(e[t].string&&-1!==e[t].string.indexOf(e[t].subString))return e[t].identity;return null}([{string:navigator.platform,subString:"Win",identity:"Win"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Windows CE",identity:"WM"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]),this.getBrowserName=function(){return DetectRTC.browser.name+" ("+DetectRTC.browser.fullVersion+")"},n.checkBrowser=function(e){return console.log("확인 browserInfo",t),t.isChrome||t.isEdge?!!t.isSupportedRM||(console.log("허용된 브라우저이지만 버전이 낮을 때"),alert($.i18n.RM00647),e?e():location.href="/home",!1):(console.log("허용된 브라우저가 아닐 때"),$.dialog("/contents/dialogs/is-not-support-browser",function(){e&&e()}),!1)},n.checkWebcam=function(){return!!n.detect.webcam()||(alert($.i18n.RM00079),!1)},n.bindClipboard=function(){var e=new Clipboard(".clipboard");e.on("success",function(e){console.info("clipboard Action:",e.action),console.info("clipboard Text:",e.text),console.info("clipboard Trigger:",e.trigger),alert($.i18n.RM00173),e.clearSelection()}),e.on("error",function(e){console.error("clipboard Action:",e.action),console.error("clipboard Trigger:",e.trigger)})},n.setFloatNotification=function(e){console.log("setFloatNotification",arguments);var t=e.id,o=e.url,i=e.type;$.get(o,function(e){var o=["<div id='"+t+"' class='float-notification "+i+"'>","<button type='button' class='close'><i class='icon close'></i></button>",e,"</div>"].join("\n");$("body").append(o);var a=$("#"+t);a.find(".close").click(function(){a.remove()}),a.find(".permanent-close").click(function(){n.localStorage.set(t,!0),a.remove()}),n.bindClipboard()})},n.notifyMac=function(){console.log("notifyMac",arguments);var e="/contents/dialogs/notify-mac";n.isDev&&(e="/html/dialogs/notify-mac"),$("#notify-mac").length||n.setFloatNotification({id:"notify-mac",url:e,type:"important"})},n.setIosUrl=function(){var e="https://itunes.apple.com/app/remotemeeting/id1052651289";switch(o){case"ko":e="https://itunes.apple.com/kr/app/remotemeeting/id1052651289";break;case"ja":e="https://itunes.apple.com/jp/app/remotemeeting/id1052651289"}$("a.ios").each(function(t,n){$(n).attr("href",e)})},n.breakpoint={is:function(e){return $("#detect-breakpoints .device-"+e).is(":visible")},get:function(){return $("#detect-breakpoints .breakpoint:visible").get(0).getAttribute("data-size")}},n.timestamp={now:function(){return(new Date).getTime()},compare:function(e,t){return console.info("timestamp.compare",arguments),e>t},toDate:function(e,t){var n,o=new Date(e),i=o.getFullYear(),a=o.getMonth()+1,r=o.getDate(),c=t||"yyyy/mm/dd";switch(a<10&&(a="0"+a),r<10&&(r="0"+r),c){case"yyyy/mm/dd":n=[i,a,r].join("/");break;case"yyyy/mm/dd hh:mm:ss":hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),n=[i,a,r].join("/")+" "+[hours,minutes,seconds].join(":");break;default:n=null}return n}},n.addZero=function(e){return Number(e)<10?"0"+e.toString():e},n.cookie={set:function(e,t,n){var o=new Date;o.setDate(o.getDate()+n),document.cookie=e+"="+escape(t)+"; path=/; expires="+o.toGMTString()+";"},get:function(e){for(var t,n=e+"=",o=0;o<=document.cookie.length;){var i=o+n.length;if(document.cookie.substring(o,i)===n)return t=document.cookie.indexOf(";",i),-1===t&&(t=document.cookie.length),unescape(document.cookie.substring(i,t));if(0===(o=document.cookie.indexOf(" ",o)+1))break}return""}},n.localStorage={set:function(e,t){console.info("localStorage.set",arguments),"object"==typeof t&&(t=JSON.stringify(t)),localStorage[e]=t},get:function(e){var t=localStorage[e];if(!t)return console.log("localStorage에 "+e+" 가 없습니다."),!1;try{"string"==typeof t&&(t.slice(0,1).match(/{/)||t.match(/true|false/))&&(t=JSON.parse(t))}catch(e){console.log("getStorage catch(error)",e)}return t},delete:function(e){console.info("localStorage.delete",arguments),localStorage.removeItem(e)}},n.goHome=function(){location.href="/home"},n.getUrlParam=function(){var e=decodeURI(location.href);if(e.indexOf("?")<0)return!1;for(var t=e.split("?")[1]?e.split("?")[1].split("&"):[],n=t.length>0?{}:null,o=0;o<t.length;o++){var i=t[o].split("=");i[0]&&(n[i[0]]=i[1])}return n},n.previewImage=function(e,t,n){if(console.info("previewImage",arguments),window.File&&window.FileReader){if(e.files&&e.files[0]){var o=e.files[0];if(!/image/i.test(o.type))return alert($.i18n.RM00459),!1;if(o.size/1024/1024>30){var i=$.i18n.RM00699.replace("#","30MB");return alert(i),$(".form-item-wrap.upload .file-name").text(""),$('.fake-input-file input[name="file"]').val(""),!1}var a=new FileReader;a.onload=function(e){t.css("background-image","url("+e.target.result+")")},a.readAsDataURL(o)}n&&n()}else console.log("미리보기 지원이 되지 않는 브라우저")},n.dataURItoBlob=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([o],{type:n})},n.replaceTagToString=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;")},n.replaceStringToTag=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},n.getConstructorName=function(e){var t=e.constructor.toString();return t=t.substr("function ".length),t=t.substr(0,t.indexOf("(")),t=$.trim(t)},n.preventInputMaxLength=function(e,t){e.on("keyup",function(){var t=$(this),n=t.val(),o=o||e.prop("maxlength");n.length>o&&t.val(n.substr(0,o))})},n.getCaretPosition=function(e){var t=0;if(e.selectionStart||0===e.selectionStart)t=e.selectionStart;else if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}return t},n.setCaretPosition=function(e,t){if(null!==e)if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},n.convertTo1ByteChar=function(e){for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o>=65281&&o<=65374&&65340!=o?(console.log(o),t+=String.fromCharCode(o-65248)):t+=8217==o?String.fromCharCode(39):8221==o?String.fromCharCode(34):12288==o?String.fromCharCode(32):65507==o?String.fromCharCode(126):65509==o?String.fromCharCode(92):e.charAt(n)}return t}}function domLoading(){for(var e=0,t=scriptCache.length;e<t;e++)if(!scriptCache[e].scriptLoaded){scriptCache[e].scriptLoaded=!0;var n=document.createElement("script");n.src=scriptCache[e].scriptUrl,n.onload=function(){domLoading(),e===t-1&&callbackCache&&callbackCache()},n.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(domLoading(),e===t-1&&callbackCache&&callbackCache())},document.getElementsByTagName("body")[0].appendChild(n);break}}function MeetingGA(e){for(var t=e&&e.countryCode?e.countryCode:"",n=!(!e||!e.isSolution)&&e.isSolution,o=location.href,i=["rhc119.com","localhost:9001/rm","remotemeeting.com/rm"],a=!1,r=0;r<i.length;r++)if(o.indexOf(i[r])>-1){a=!0;break}this.isActive="CN"!==t&&!n&&!a,console.log("ga isActive",this.isActive),this.isActive&&(this.registerInvalidGa=function(e,t,n){for(var o in n)ga("send","event",e,t[o],""),console.log("****google ga:",e,t[o],"")},this.send=function(e,t,n){ga("send","event",e,t,n),console.log("****google ga:",e,t,n)})}/*!
 *
 * RemoteMeeting - global-class-api-conference.js
 *
 * IMPORTANT NOTE: This file is licensed only for use in providing the RSUPPORT services,
 *
 * @license Copyright (c) RSUPPORT CO., LTD. (http://www.rsupport.com/)
 * @author Front-End Team | Park Jeong Shik (jspark@rsupport.com)
 * @fileOverview conference API
 *
 */
function ConferenceAPI(e){console.log("ConferenceAPI",e);var t=e.request,n=e.apiDomain,o=e.setRequestHeader,i=e.logout;this.create=function(e,a,r,c){console.log("Conference Create",e,r,a),"seminar"===e.RCD.conference.type&&(e.RCD.conference.conferenceMediaType="AMS",e.RCD.conference.videoQuality="720"),"document"!==e.RCD.conference.type&&"screen"!==e.RCD.conference.type||(e.RCD.conference.videoQuality="360"),t({action:n+"/conference/create",method:"post",params:e,beforeSend:function(e){o(e)},success:function(e){"40100"===e.returnCode?a(e):"40734"===e.returnCode?a(e):"40612"===e.returnCode?(alert(e.message+" [Code: "+e.returnCode+"]"),i()):r(e)},timeout:c,error:r})},this.join=function(e,i,a){console.log("Conference Join API",arguments),t({action:n+"/conference/join",method:"post",params:e,beforeSend:function(e){o(e)},success:function(e){"40100"===e.returnCode?i(e):a(e)},error:a})},this.search=function(e,i,a,r){console.log("Conference Search API",arguments),r=void 0===r||r,t({async:r,action:n+"/conference/info",method:"get",params:e,beforeSend:function(e){o(e)},success:function(e){"40100"===e.returnCode?i(e):a(e)},error:a})},this.reservationConferenceInfo=function(e,t){$.requestAjax({action:n+"/reservation/share/"+e,method:"get",beforeSend:function(e){$.rmAuth.setRequestHeader(e)},success:function(e){t(e)}})},this.createForRCD=function(e,t,o,i){$.ajax({url:n+"/conference/create",type:"post",data:$.toJSON(e),timeout:4e3,contentType:"application/json;charset=UTF-8",beforeSend:function(e){e.setRequestHeader("Authorization",i)},success:function(e){"40100"===e.returnCode?t(e):o(e)},error:o})}}function WebAPI(e){function t(){location.pathname.match("/room/")||$.loader.show(!0)}function n(){location.pathname.match("/room/")||$.loader.hide()}function o(e){return"[Code: "+e+"]"}function i(e){console.log("api.request",arguments,e.params),u=!1!==e.isLoading;var o=e.replaceXSSChar,i=e.action,a=e.method.toLowerCase(),r=e.params,c=void 0===e.async||e.async,l=e.beforeSend,d=e.complete,f=e.success,g=e.error,p=e.timeout||3e4,m=e.reqDataType||"json",h="";switch(m){case"formData":h="application/x-www-form-urlencoded; charset=utf-8";break;case"json":default:if(h="application/json;charset=UTF-8",r){if(o)switch(s.getConstructorName(r)){case"String":r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;");break;case"Object":r=$.toJSON(r),r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),r=JSON.parse(r)}r="get"===a?$.param(r):$.toJSON(r)}else r=void 0}var v={url:i,type:a,contentType:h,data:r,dataType:"json",async:c,timeout:p,cache:!1,success:function(t){console.info("AJAX SUCCESS",t),f&&f(t,e.params)}};g&&(v.error=g),v.beforeSend=function(e){console.log("beforeSend",v.url,u),u&&t(),l&&l(e)},v.complete=function(){console.log("+++completeLoading",v.url,u),u&&n(),d&&d()},$.ajax(v)}function a(e,t){return{"/account/agree":{success:function(e){"40100"===e.returnCode?(c.ga&&c.ga.send("Home>account>join","submit-success",""),location.href="/"+l+"/account/join"):c.handleDefaultError(e)}},"/account/join":{hasPassword:!0,success:function(e,t){"40100"===e.returnCode?(c.ga&&c.ga.send("Home>account>join","submit-success",""),localStorage.removeItem("marketingAgreement"),t.idp&&"google"===t.idp.toLowerCase()?(alert($.i18n.RMB0881),location.href="/"):location.href="/"+l+"/account/join-waiting?email="+t.username):c.handleDefaultError(e)}},"/landing/user-join":{hasPassword:!0,success:function(e,t){"40100"===e.returnCode?(c.ga&&c.ga.send("Landing","join-trial-bottom-success",""),location.href="/"+l+"/account/join-waiting?email="+t.email):c.handleDefaultError(e)}},"/account/join-mail":{success:function(){alert($.i18n.RM00570)}},"/account/invite-password":{hasPassword:!0,success:function(e){"40100"===e.returnCode?(location.href="/"+l+"/account/invite-finish?role="+e.returnData.role,localStorage.removeItem("marketingAgreement")):c.handleDefaultError(e)}},"/account/password-mail":{success:function(e){if("40100"===e.returnCode){alert($.i18n.RM00586);var t=s.getUrlParam();console.log("****trace",t,t.trace),t&&t.redirect?location.href=decodeURIComponent(t.redirect):t&&"admin"===t.trace?location.href="/admin":t&&"partner"===t.trace?location.href="/partner/login":s.goHome()}else c.handleDefaultError(e)}},"/account/password-finish":{hasPassword:!0,success:function(e){"40100"===e.returnCode?(alert($.i18n.RM00595),s.goHome()):c.handleDefaultError(e)}},"/support/contact-save":{replaceXSSChar:!0,success:function(e){"40100"===e.returnCode?(alert($.i18n.RM00410),location.reload()):c.handleDefaultError(e)}}}[e]}function r(){var t={device:{deviceID:e.user.email}};c.request({action:"/account/logout",method:"post",params:t,success:function(e){e.returnCode.match(/40100|40401/)?c.expiredSessionClient():c.handleDefaultError(e)}})}console.log("WebAPI",e);var c=this,s=e.util,l=e.lang,d=e.apiDomain,u=!0,f=e.isSolution;c.ga=e.ga,c.auth=$.rmAuth={setAnonymousKey:function(e,t,n){i({action:d+"/authorizationKey",method:"post",params:{userInfo:{userType:"guest"}},timeout:n,success:function(t){if("40100"===t.returnCode){var n=t.returnData.authorizationKey;c.auth.set(n),console.log("***callback",e),e&&e()}},error:t})},set:function(e){localStorage.setItem("authorizationKey",e)},get:function(){return localStorage.getItem("authorizationKey")},delete:function(){localStorage.removeItem("authorizationKey")},setRequestHeader:function(e){var t=c.auth.get();!!t&&e.setRequestHeader("Authorization",t),e.setRequestHeader("X-Language",l)}},c.conference=new ConferenceAPI({setRequestHeader:c.auth.setRequestHeader,request:i,handleDefaultError:c.handleDefaultError,apiDomain:e.apiDomain,logout:r}),$.ajaxSetup({error:function(e,t,n){switch(console.log("Response Error - "+e.status,t,n),$.loader.isVisible&&$.loader.hide(),e.status){case 0:return alert($.i18n.RMB0884),!1;case 401:alert($.i18n.RMA00514),c.auth.delete(),r();break;default:alert("Response Error - "+e.status)}}}),c.expiredSessionClient=function(){var t=s.localStorage.get("loginRef");!f&&e.firebaseClient&&e.firebaseClient.unregister(),c.auth.delete(),s.localStorage.delete("loginRef"),t&&t.indexOf("/rm/")>-1?location.href=t:location.href="/"},c.handleDefaultError=function(e){console.log("handleDefaultError",e);var t=e.returnCode||"Undefined",n=e.message?e.message.replace(/<br>/gi,"\n"):"Unknown error";return t.match(/40401|40710/)?c.expiredSessionClient():(alert(n+" "+o(t)),"40612"===t&&r()),!1},c.logout=r,c.request=$.requestAjax=i,c.showLoader=t,c.hideLoader=n,c.submit=function(e,t){if(DetectRTC.browser.isIE||"false"===$("body").attr("data-is-support-browser"))return void $.dialog("/contents/dialogs/is-not-support-browser");var n=t.replaceXSSChar,o=t.reqDataType,i={action:e.attr("action"),method:e.attr("method"),params:"",success:null,error:null,reqDataType:""},r=a(i.action,e);if(i.reqDataType=o||(r.reqDataType?r.reqDataType:e[0].getAttribute("data-req-data-type")),"file"===i.reqDataType)e.ajaxSubmit({dataType:"json",beforeSubmit:function(){return!0},uploadProgress:function(e,t,n,o){},success:function(e){console.log("success",e),r&&r.success&&r.success(e)},error:function(e){console.log("error",arguments),r&&r.error&&r.error[e.status]&&r.error[e.status](e)}});else{i.params=e.serializeObject();var s=null;if(console.log("여기 join",r),"/account/agree"!==i.action&&"/account/invite-password"!==i.action||(s="on"===i.params.marketingAgreement,localStorage.setItem("marketingAgreement",s)),"/account/join"!==i.action&&"/account/invite-password"!==i.action||(s=localStorage.getItem("marketingAgreement")),i.params.marketingAgreement=s,r.hasPassword)for(var l=e.find('[type="password"]'),d=l&&l.length,u=0;u<d;u++){var f=l.eq(u).attr("name");i.params[f]=Sha256.hash(i.params[f].trim())}console.log("## 0",i.params),r.param&&(i.params=r.param),n&&(i.params=$.toJSON(i.params),i.params=i.params.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),i.params=JSON.parse(i.params)),console.log("## 1",i.params,i.reqDataType),i.reqDataType&&(i.params=$.param(i.params)),console.log("## 2 ",i.params),c.request($.extend(i,r))}},c.moveToRemoteview=function(){c.request({isLoading:!1,action:d+"/oauth/loginUrl",method:"get",params:"",beforeSend:function(e){c.auth.setRequestHeader(e)},success:function(e){if("40100"===e.returnCode){window.open(e.returnData.oAuthLoginUrl,"_blank")||alert($.i18n.RMA00498)}else c.handleDefaultError(e)}})},c.remoteviewDisconnect=function(){c.request({action:d+"/oauth/disconnect",method:"get",params:"",beforeSend:function(e){c.auth.setRequestHeader(e)},success:function(e){"40100"===e.returnCode?($("#rview-account").removeClass("account-on"),$.dialog.close(),alert($.i18n.RM00781),$.dialog("/contents/dialogs/session/rview-account-on",null,"remoteview-box")):c.handleDefaultError(e)}})},window.meeting={},$.extend(window.meeting,{handleDefaultError:c.handleDefaultError})}function Conference(e){function t(e,t){console.log("createNickName",arguments,t),$.dialog("/contents/dialogs/create-nickname",function(){var n=$("#dialog").find("form"),o=$("#nickname"),i=s.localStorage.get("displayName");i&&o.val(i),"create"===t.type?"enterprise"===t.licenseType?$(".demo-create-content").remove():$(".default-content").remove():"join"===t.type&&$(".demo-create-content").remove(),n.validate({rules:{nickname:{blockXSSChar:!0,required:!0}},submitHandler:function(){var t=o.val().trim()||"Guest";return e&&e(t),!1}})})}function n(){$.dialog("/contents/dialogs/error-connect-code",function(){var e=$("#dialog").find("form"),t=e.attr("data-conference");e.validate({submitHandler:function(e){if(console.log("Conference Popup submitHandler"),s.checkBrowser())return c.search($(e),t),!1}})})}function o(e){console.log("handleError",arguments);var t=e.returnCode||"Undefined",o=e.message?e.message.replace(/<br>/gi,"\n"):"Undefined";if(t.match(/40226/))alert(o);else if(t.match(/40224/)){if(location.pathname==="/"+u+"/home"){var i=f?"LoginUser":"GuestUser";l.ga&&l.ga.send("Home>main","joinmeeting-submit",i+" / 접속코드가 일치하지 않습니다.")}n()}else alert(o),$.dialog.close();return!1}function i(e){var t="";return l.conference.search(e,function(e){"40100"===e.returnCode?t=e.returnData:(alert(e.message),location.href="/")},null,!1),t}function a(e,t){var n=location.host,o=n.match("rhc119")?"history":"room-list",i="/lounge/"+o+"?type=createByReservation&title="+e+"&reservationDateID="+t;console.log("+++loungeCreateConferenceURL",i),location.href=i}function r(e,t,n){var o=function(o){if("40100"===o.returnCode){var r=o.returnData||null,s=r&&r.reservationDateID,l=r&&r.accessCode;if(l){var d=i({accessCode:l}),u=d.conference.conferenceID;location.href="/room/"+u}else n?c.create({title:e,licenseType:"enterprise",reservationDateID:s,reservationID:t,type:"video"}):a(e,s)}else alert(o.message),location.href="/"};l.conference.reservationConferenceInfo(t,o)}var c=this,s=e.util,l=e.api,d=e.user,u=e.lang,f=e.isLogined;c.createLiveMeeting=function(){c.create({title:$.i18n.RM00886,type:"liveDemo",videoQuality:"720",conferenceMediaType:"AMS",isDirectOpen:!0})},c.create=function(e){function n(e){function t(t){if("40100"===t.returnCode){var n=t.returnData,o="/room/"+n.conference.conferenceID+"?endpointID="+n.endpoint.endpointID;if(f){var r={video:"Video",document:"Document Sharing",screen:"Screen Sharing"},d={360:"Normal",720:"HD"},g=r[$("#startMode").find(".mode-check:checked").val()],p=d[$("#video-quality-wrap").find("input:checked").val()],m="Video"===g?g+" / "+p:g;l.ga&&l.ga.send("Home>main","startmeeting-submit",m)}else location.pathname==="/"+u+"/home"?l.ga&&l.ga.send("Home>main","startmeeting-submit","Guest Version"):location.pathname.toLowerCase().indexOf("landing")>-1&&l.ga&&l.ga.send("Landing","startmeeting-guest-user","");e&&s.localStorage.set("displayName",e),s.localStorage.set("homeReferer",!0),location.href=o}else if("40734"===t.returnCode){var h=function(e){if("40100"===e.returnCode){var t=e.returnData||null,n=t&&t.reservationDateID,o=t&&t.accessCode;if(o){var r=i({accessCode:o}),s=r.conference.conferenceID;location.href="/room/"+s}else c.create({title:a,licenseType:"enterprise",reservationDateID:n,reservationID:v,type:"video"})}else alert(e.message),location.href="/"};l.conference.reservationConferenceInfo(v,h)}else l.handleDefaultError(t)}e&&(b.RCD.endpoint.displayName=encodeURIComponent(e)),s.getBrowserName().match(/edge/i)&&(b.RCD.conference.conferenceMediaType="AMS"),f?l.conference.create(b,t,o):l.auth.setAnonymousKey(function(){l.conference.create(b,t,o)})}var a=e.title,r=e.type||"video",g=e.videoQuality||720,p=e.isDirectOpen,m=f||"enterprise"===e.licenseType?"enterprise":"free",h=e.reservationDateID||"",v=e.reservationID||"",C=e.conferenceMediaType||"";if(console.log("conference create option",e),!s.checkBrowser())return!1;var b={RCD:{conference:{customerID:f?d.customerID:"",licenseType:m,title:a,type:r,reservationDateID:h,videoQuality:g},endpoint:{deviceType:"web",displayName:f?encodeURIComponent(d.name):"",language:u,osName:s.platform,browser:s.getBrowserName()}}};""!==C&&(b.RCD.conference.conferenceMediaType=C),f?n():p?n("Guest"):t(n,{type:"create",licenseType:m})},c.search=function(e){function n(e){function n(e){function t(){if(location.pathname==="/"+u+"/home"){var e=f?"LoginUser":"GuestUser";l.ga&&l.ga.send("Home>main","joinmeeting-submit",e+" / JoinSuccess")}}var n={RCD:{conference:{conferenceID:a},endpoint:{displayName:f?encodeURIComponent(d.name):encodeURIComponent(e),deviceType:"web",language:u,osName:s.platform,browser:s.getBrowserName()}}};s.getBrowserName().match(/edge/i)&&(n.RCD.conference.conferenceMediaType="AMS"),l.conference.join(n,function(n){var o=n.returnData;t(),f||s.localStorage.set("displayName",e),s.localStorage.set("homeReferer",!0),location.href="/room/"+o.conference.conferenceID+"?endpointID="+o.endpoint.endpointID},o)}if("40100"===e.returnCode){var i=e.returnData,a=i.conference.conferenceID;f?n():t(n,{type:"join"})}else l.handleDefaultError(e)}if(console.log("Conference Search Interface"),!s.checkBrowser())return!1;var i=e.find('input[name="accessCode"]'),a=null;if(i.length?(a=i.val(),a=a.split(" ").join("")):a=e.get(0).getAttribute("data-access-code"),!a)return i.focus(),!1;var r={accessCode:a};f?l.conference.search(r,n,o):l.auth.setAnonymousKey(function(){l.conference.search(r,n,o)})},c.createForCheking=function(e,t){console.log("createForCheking",arguments);var n={RCD:{conference:{licenseType:"free",title:"연결 상태 진단",type:"video",videoQuality:360,test:!0},endpoint:{deviceType:"web",displayName:"진단 테스터",language:u,osName:s.platform,browser:s.getBrowserName()}}};f?l.conference.create(n,e,t,4e3):l.auth.setAnonymousKey(function(){l.conference.create(n,e,t,4e3)},t,4e3)},c.callSearch=i,c.conferenceForReservationID=r,c.goLoungeForReservationID=a}function Colabox(e){console.info("Colabox() 호출",e);var t=this;t.$win=$(window),t.$doc=$(document),t.$html=$("html"),t.$body=$("body"),t.$header=$("#header"),t.$main=$("#container"),t.serverType=e.serverType,t.environment=location.href.match(/172.25|dev/)?"dev":"www",t.apiDomain=e.apiDomain,t.href=location.href,t.pathName=location.pathname,t.hash=location.hash,t.lang=e.lang,t.isAdmin=e.isAdmin,t.isSolution=e.isSolution,t.countryCode=e.countryCode,t.domain=e.domain,t.isWinXP=navigator.userAgent.match(/windows nt 5.1/i),t.isWinVista=navigator.userAgent.match(/windows nt 6.0/i),t.isOsNameMac=!!DetectRTC.osName.match("Mac"),t.user=e.user,t.isLogined=t.user.isLogined,t.isLounge=t.$main.hasClass("lounge"),t.isBrand=!t.isLounge,t.isMobile=DetectRTC.isMobileDevice,t.googleClientId=e.googleClientId,t.emitter=new EventEmitter,t.util=new Util(t);var n={countryCode:t.countryCode,isSolution:t.isSolution};t.ga=new MeetingGA(n),t.ga.isActive||(t.ga=null),t.api=new WebAPI(t),this.isAndroid="Android"===t.util.platform,this.isIOS="iOS"===t.util.platform,t.authorizationKey=t.api.auth.get(),t.conference=new Conference(t),this.insertMsgHtml=function(e,t,n){var o=e.find(".error");console.log("여기 insertMsgHtml",e,t,n),msgHtml='<em id="email-check-input-error" class="'+t+'">'+n+"</em>",o.length?o.html(n).attr("class",t):e.append(msgHtml)}}function OAuth(e){rm.api;this.init=function(){window.loadAuthClient=function(){gapi.load("auth2",function(){window.gauth=gapi.auth2.init({client_id:e})})}},this.getGoogleInfo=function(e){gauth.signIn({prompt:"select_account"}).then(function(){var t=gauth.currentUser.get(),n=t.getBasicProfile(),o=n.getName(),i=n.getEmail(),a=t.getAuthResponse().id_token;e(i,o,a)})}}/*!
 *
 * RemoteMeeting - mqtt.js
 *
 * IMPORTANT NOTE: This file is licensed only for use in providing the RSUPPORT services,
 *
 * @license Copyright (c) RSUPPORT CO., LTD. (http://www.rsupport.com/)
 * @author Front-End Team | Park Jeong Shik (jspark@rsupport.com) | Kim Ah Reum (arkim@rsupport.com)
 * @fileOverview Socket connection & message Manager
 *
 */
function MQTT(e){console.info("[mqtt] Loaded MQTT",arguments);var t=this,n=e.emitter,o=e.customerID,i=e.willDestination,a=e.willMessageData,r={},c=0;try{r={domain:e.controlServer.domain,port:1*e.controlServer.port,username:e.controlServer.username,password:e.controlServer.password}}catch(e){return console.warn("Not Found ResData - Control Server Address"),!1}var s=new Date,l=new Messaging.Client(r.domain,r.port,"clientId-"+s.getTime()),d={useSSL:443===r.port||8443===r.port,timeout:5,keepAliveInterval:30,userName:r.username,password:r.password,willMessage:a?function(e,t){var n=new Messaging.Message(JSON.stringify(t));return n.qos=2,n.destinationName=e,n.retained=!0,n}(i,a):null,onSuccess:function(){console.info("[mqtt] Connected",this),l.subscribe("/RCCP/CHANNELS/"+o),n.emit("socketConnected")},onFailure:function(e){if(console.warn("[mqtt] Connection failed: "+e.errorMessage),!(c<3))return console.warn("[mqtt] Control Server Connection Failed"),n.emit("socketFailed"),!1;l.reconnect(),c++}};l.connect(d),l.reconnect=function(){console.info("[mqtt] reconnect",arguments),l.connect(d)},l.onConnectionLost=function(e){console.error("[mqtt] Connection Lost",e),n.emit("socketLost",e)},l.onMessageArrived=function(e){var t=null;try{t=$.parseJSON(e.payloadString)}catch(e){return console.warn("This MQTT Message is not JSON type String or else."),!1}console.log("[mqtt] onMessageArrived",t),n.emit("message",t)},t.publish=function(e,t,n){console.log("publish",arguments);var o=new Messaging.Message(JSON.stringify(t));o.destinationName=e,o.qos=n||0,l.send(o)},t.leaveLounge=function(){l.unsubscribe("/RCCP/CHANNELS/"+o),l.disconnect()},t.getMqtt=function(){return l},t.unsubscribe=l.unsubscribe,t.disconnect=l.disconnect}function ICEChecker(e){function t(e){console.log("createPeerConnection",arguments);var t={type:e,pc:null};return t.pc=new u(M),t.pc.onicecandidate=function(n){n.candidate?(A.sendCandidate(null,e,{sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid,candidate:n.candidate.candidate}),console.log("sendCandidate",t.type,n.candidate)):console.info("Candidate denied",n.candidate)},t.pc.onaddstream=function(e){console.log("Adding remote strem",e)},t.pc.onremovestream=function(e){console.log("Removing remote stream",e)},t.pc.onnegotiationneeded=function(e){console.log("onnegotiationneeded",e)},t.pc.onsignalingstatechange=function(e){console.log("onsignalingstatechange",e)},t.pc.oniceconnectionstatechange=function(e){console.log("oniceconnectionstatechange",t.type,"iceGatheringState: "+t.pc.iceGatheringState,"/ iceConnectionState: "+t.pc.iceConnectionState),"connected"===t.pc.iceConnectionState&&(clearTimeout(k),p.emit("iceConnected"))},k=setTimeout(function(){i("No ice connection")},R),T.push(t),t}function n(e){console.log("getPeer",arguments,T);for(var t=null,n=0;n<T.length;n++)T[n].type===e&&(t=T[n].pc);return t}function o(e,t,n){console.log("createAnswer",arguments),t.setRemoteDescription(new f(n),function(){t.createAnswer(function(n){t.setLocalDescription(n,function(t){console.log("확인 setLocalDescription success",e,n.sdp,t),A.sendSessionAnswer(null,e,n.sdp)},function(e){console.log("확인 setLocalDescription error",arguments)})},i,I)},function(){console.error("Error setRemoteDescription",arguments),i("Error setRemoteDescription")})}function i(e){console.log("onError",e),p.emit("iceError",e)}function a(e){A.sendMediaConnection("videoSend"),clearTimeout(S),$=setTimeout(function(){i("No response mediaConnectionRequest")},R)}function r(e){console.log("onSessionOffer",e);var n=e.sessionType;o(n,t(n).pc,{type:"offer",sdp:e.SDP}),clearTimeout($)}function c(e){console.log("onCandidateOffer",e);var t=e.sessionType,o=n(t),i=new g({sdpMLineIndex:e.sdpMLineIndex,sdpMid:e.sdpMid,candidate:e.candidate});o.addIceCandidate(i)}function s(){A.sendMediaChannelCreation(C),S=setTimeout(function(){i("No response mediaChannelCreateRequest")},R),D=!0}function l(e){console.log("close",arguments);var t=n(e);t&&t.close(),A.sendMediaDisconnection(e)}function d(e){console.log("changeRCD",e),v=e.conference.conferenceID,C=e.endpoint.endpointID,A=new Signaling({socket:m,controlServer:{domain:b.IPv4,port:b.port},mediaServer:{domain:w.IPv4,port:w.port},advancedMediaDomain:y,conferenceID:v,endpointID:C})}console.log("Loaded ICEChecker",e);var u=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,f=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,g=window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate,p=e.emitter,m=e.socket,h=e.RCD,v=h.conference.conferenceID,C=h.endpoint.endpointID,b=h.hosts.controlServer,w=h.hosts.mediaServer,y=e.urlAmsAddressParam||h.hosts.advancedServer.IPv4,D=!1,S=null,$=null,k=null,R=6e3,T=[],I={},M={iceServers:[{urls:"stun:"+w.IPv4+":"+w.port},{urls:"turn:"+w.IPv4+":"+w.port+"?transport=tcp",username:w.username,credential:w.password}]},A=new Signaling({socket:m,controlServer:{domain:b.IPv4,port:b.port},mediaServer:{domain:w.IPv4,port:w.port},advancedMediaDomain:y,conferenceID:v,endpointID:C});p.on("message",function(e){e&&(e.mediaChannelCreateResponse?a(e.mediaChannelCreateResponse):e.sessionOffer?r(e.sessionOffer):e.candidateOffer&&c(e.candidateOffer))}),this.start=s,this.close=l,this.changeRCD=d}function ConnectionCheckerUI(e){function t(e,t){t=Math.round(t),t>100?t=100:t<0&&(t=0);var n=Math.round(t/100*360);t>50?($(e+" .pie").css("clip","rect(auto, auto, auto, auto)"),$(e+" .right-side").css("transform","rotate(180deg)")):($(e+" .pie").css("clip","rect(0, 1em, 1em, 0.5em)"),$(e+" .right-side").css("transform","rotate(0deg)")),$(e+" .left-side").css("transform","rotate("+n+"deg)")}console.log("Loaded ConnectionCheckerUI",arguments);var n=e.checking,o={update:function(e,n,i){console.log("update",arguments),t("#pie-"+e,n.percentage),n.percentage>=100?(o.appendState(e,"OK"),i()):n.result||(t("#pie-"+e,100),o.appendState(e,"Need checking"),i())},reset:function(){var e=$("#check-list"),n=$("#checking-result"),o=n.find(".state");e.find("strong").remove(),e.find("li").removeClass("state-ok state-processing state-need-checking"),e.find("li").each(function(){t("#"+this.id,0)}),n.removeAttr("class"),n.find(".visible").removeClass("visible"),o.text($.i18n.RM00799)},appendState:function(e,t){var n,o=t.toLowerCase().replace(" ","-"),i=$("#pie-"+e),a=$("#checking-result"),r=a.find(".state");switch(i.removeClass("state-ok state-processing state-need-checking").addClass("state-"+o),"OK"===t?t+="!":"Processing"===t&&(t+="..."),i.find("strong").length?i.find("strong").html(t):i.append(["<strong>"+t+"</strong>"].join("\n")),"need-checking"===o&&(a.addClass(o),a.find("#result-"+e).addClass("visible")),e){case"camera":n=$.i18n.RM00800;break;case"mic":n=$.i18n.RM00801;break;case"internet":n=$.i18n.RM00802;break;case"connection":n=$.i18n.RM00803}r.text(n)},changeButton:function(e){var t=$("#check-button");"stop"===e?(t.removeClass("green").addClass("gray"),t.text($.i18n.RM00797)):(t.removeClass("gray").addClass("green"),t.text($.i18n.RM00798))},camera:function(){return new Promise(function(e){o.appendState("camera","Processing"),n.camera(function(t){o.update("camera",t,e)})})},mic:function(){return new Promise(function(e){o.appendState("mic","Processing"),n.mic(function(t){o.update("mic",t,e)})})},internet:function(){return new Promise(function(e){o.appendState("internet","Processing"),n.internet(function(t){o.update("internet",t,e)},50)})},connection:function(){return new Promise(function(e){o.appendState("connection","Processing"),n.connection(function(t){o.update("connection",t,e)},1e3/15)})},finish:function(){var e=$("#checking-result");e.attr("class")||e.addClass("success"),e.addClass("finished").find(".date span").text(moment().format("YYYY.MM.DD H:mm:ss"))}};$.extend(this,o)}function ConnectionChecker(e){function t(e,t,o){if(console.log("onConnectionCheking",arguments),!l){var i=c.hosts.controlServer;l=new MQTT({emitter:p,customerID:null,endpointID:c.endpoint.endpointID,controlServer:{domain:i.IPv4,port:i.port,username:i.username,password:i.password}})}s?u?e.start(t,o):(e.start(t,o),e.stop()):p.on("socketConnected",function(){$("#pie-connection").hasClass("state-processing")&&(e.start(t,o),l.getMqtt().subscribe("/RCCP/CON/"+c.conference.conferenceID+"/"+c.endpoint.endpointID),n(),s.start(),u=!0)}).on("socketFailed",function(){$("#pie-connection").hasClass("state-processing")&&(e.start(t,o),e.stop())}).on("socketLost",function(){$("#pie-connection").hasClass("state-processing")&&(e.stop(),u=!1)}).on("iceError",function(){$("#pie-connection").hasClass("state-processing")&&e.stop()}).on("iceConnected",function(){console.log("확인 iceConnected"),f=!0})}function n(){s=new ICEChecker({emitter:p,socket:l,RCD:c,urlAmsAddressParam:h})}function o(){console.log("start",arguments),d&&b.reset(),b.camera().then(b.mic).then(b.internet).then(b.connection).then(i,function(e){console.log("확인 에러",e)}),b.changeButton("stop"),d=!0}function i(){console.log("finish",arguments),b.changeButton("start"),b.finish(),s&&s.close("videoSend")}function a(){console.log("stop",arguments),v.stopAll(),b.changeButton("start"),b.reset()}function r(){window.scriptLoading(["/public/service/dist-room/webrtc/modules/signaling.js"])}console.log("Loaded ConnectionChecker",arguments);var c,s,l,d,u,f,g=e.conference,p=e.emitter,m=0,h=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}("ams"),v={stopFlag:!1,stopAllFlag:!1,timer:!1,start:function(e,t){var n=v;m++,t||(t=20);var o={result:!0,percentage:m};n.stopFlag?(o.result=!1,n.resetForNext()):m<100?n.timer=setTimeout(function(){n.start(e,t)},t):n.resetForNext(),n.stopAllFlag?(n.resetForNext(),clearTimeout(n.timer)):e(o)},stop:function(){v.stopFlag=!0},resetForNext:function(){m=0,v.stopFlag=!1,v.stopAllFlag=!1},stopAll:function(){v.stopAllFlag=!0}},C={bindDeviceChangeEvent:function(){console.log("bindDeviceChangeEvent"),navigator.mediaDevices.ondevicechange=C.updateDevice},updateDevice:function(e){console.log("updateDevice",e),navigator.mediaDevices.enumerateDevices().then(function(e){var t=[],n=[];e.forEach(function(e){console.log("device",e);var o=e.kind;"audioinput"===o?t.push(e):"videoinput"===o&&n.push(e)}),DetectRTC.hasMicrophone=t.length,DetectRTC.hasWebcam=n.length})},camera:function(e,t){v.start(e,t),DetectRTC.hasWebcam||v.stop()},mic:function(e,t){v.start(e,t),DetectRTC.hasMicrophone||v.stop()},internet:function(e,t){c=null,v.start(e,t),g.createForCheking(function(e){s?(c=e.returnData,s.changeRCD(c)):c=e.returnData},function(){v.stop()}),$.loader.hide()},connection:function(e,n){console.log("확인 hasIceConnection",f),c?f?(v.start(e,n),g.createForCheking(function(e){},function(){v.stop()}),$.loader.hide()):t(v,e,n):(v.start(e,n),v.stop())}},b=new ConnectionCheckerUI({checking:C});this.open=function(){return $.dialog("/contents/dialogs/connection-checker","box",function(){$("#check-button").click(function(){$(this).hasClass("green")?o():a()}),r(),C.bindDeviceChangeEvent(),v.resetForNext()}),$.dialog.closeCallback=function(){v.stopAll()},!0}}/*!
 *
 * RemoteMeeting - device-setting.js
 *
 * IMPORTANT NOTE: This file is licensed only for use in providing the RSUPPORT services,
 *
 * @license Copyright (c) RSUPPORT CO., LTD. (http://www.rsupport.com/)
 * @author Front-End Team | Park Jeong Shik (jspark@rsupport.com)
 * @fileOverview Conference Device Setting
 *
 */
function DeviceSetting(e){function t(e,t){e&&e.height(t<-45?0:"".concat(Math.floor(100*(t+100)/25-220),"%"))}console.info("Loaded Device Setting",arguments);var n=this,o=e.isLounge,i=e.isShowVolumebar,a=e.isSavingReload,r=e.setStorage,c=e.getStorage,s=e.submit,l=e.closeCallback,d={},u=null,f=!0,g=DetectRTC.browser.isEdge,p=null;o&&(e.isSavingReload=!1),n.open=function(){var e=c("deviceSettingData");return DetectRTC.hasWebcam||DetectRTC.hasMicrophone?($.dialog("/service/dialogs/device-setting.html","box",function(){p=$("#device-setting-wrap"),n.setSelectList(e),n.initMirrorMode(e.cameraMirrorOff),p.find("form").submit(function(){return s(),!1}),$("body").find("[data-title]:not(.side-button)").tooltip({targetAttr:"data-title",placement:"bottom"})}),$.dialog.closeCallback=function(){l&&l(),u=null},!0):(alert($.i18n.RM00695),!1)},n.getDeviceList=function(){return DetectRTC.load(),{videos:DetectRTC.videoInputDevices,audios:DetectRTC.audioInputDevices}},n.setSelectList=function(e){var t=n.getDeviceList(),o=[],i=[],a=$("#camera-list"),r=$("#mic-list");console.log("savedDevice",e),$.each(t.videos,function(e,t){o.push('<option value="'.concat(t.id,'">').concat(t.label,"</option>"))}),$.each(t.audios,function(e,t){i.push('<option value="'.concat(t.id,'">').concat(t.label,"</option>"))}),a.find("select").html(o),r.find("select").html(i),e&&(g?(e.videoName&&a.find('option:contains("'.concat(e.videoName,'")')).attr("selected","selected"),e.audioName&&r.find('option:contains("'.concat(e.audioName,'")')).attr("selected","selected")):(e.videoId&&a.find('option[value="'.concat(e.videoId,'"]')).attr("selected","selected"),e.audioId&&r.find('option[value="'.concat(e.audioId,'"]')).attr("selected","selected"))),a.find("option:selected").addClass("saved-option"),r.find("option:selected").addClass("saved-option"),$("#device-list").find("select").change(function(){f&&(f=!1,n.preview({videoId:a.find("option:selected").val(),videoName:a.find("option:selected").text(),audioId:r.find("option:selected").val(),audioName:r.find("option:selected").text()}))}).change()},n.updateLabel=function(){var e=n.getDeviceList();$.each(e.videos,function(e,t){$("#dialog").find('option[value="'.concat(t.id,'"]')).text(t.label)}),$.each(e.audios,function(e,t){$("#dialog").find('option[value="'.concat(t.id,'"]')).text(t.label)})},n.preview=function(r){console.log("preview",r),d=$.extend(d,r);var c={},s=!$("#camera-list").find("option:selected").hasClass("saved-option"),l=!$("#mic-list").find("option:selected").hasClass("saved-option");a=!(!e.isSavingReload||!s&&!l),DetectRTC.hasWebcam&&(c.video={deviceId:r.videoId,aspectRatio:1.77},o&&(c.video.width={min:320,max:1280},c.video.height={min:180,max:720})),DetectRTC.hasMicrophone&&DetectRTC.hasMicrophone&&(c.audio={optional:[{sourceId:r.audioId}]}),navigator.getUserMedia(c,function(e){function o(){e.getTracks().forEach(function(e){e.stop()})}if(!$("#camera-preview")[0])return o(),f=!0,!1;$("#camera-preview")[0].srcObject=e,n.updateLabel(),0===e.getVideoTracks().length&&p.find("#camera-list select").html("<option>Not found camera</option>"),e.getAudioTracks().length?i&&(u=hark(e,{interval:100,threshold:-45}),u.on("volume_change",function(e,n){u&&t($("#camera-preview-wrap").find(".volume-bar"),e)}),p.find(".volume-bar").show()):p.find("#mic-list select").html("<option>Not found microphone</option>"),$("#dialog").find("button").click(o),$(window).keydown(function(e){27===e.keyCode&&o()}),f=!0},function(e){console.log("error",arguments),f=!0})},n.save=function(){return r("deviceSettingData",d),$.dialog.close(),n.applyMirrorOptionMainVideo(d.cameraMirrorOff),new Promise(function(e,t){e({isSavingReload:a})})},n.applyMirrorOptionMainVideo=function(e){e?$("#conference-wrap").removeClass("camera-mirror-on").addClass("camera-mirror-off"):$("#conference-wrap").removeClass("camera-mirror-off").addClass("camera-mirror-on")},n.initMirrorMode=function(e){var t=$("#switch-mirror");e?($("#switch-mirror").prop("checked",!1),n.cameraMirrorOff()):($("#switch-mirror").prop("checked",!0),n.cameraMirrorOn()),t.change(function(){var e=$("#switch-mirror").prop("checked");d.cameraMirrorOff=!e,e?n.cameraMirrorOn():n.cameraMirrorOff()})},n.cameraMirrorOn=function(){$("#camera-preview").removeClass("camera-mirror-off").addClass("camera-mirror-on")},n.cameraMirrorOff=function(){$("#camera-preview").removeClass("camera-mirror-on").addClass("camera-mirror-off")}}!function(e){"use strict";console.info("rm.dialog.js loaded.");var t=e(window),n=e(document);e.fn.dialog=function(){return console.log("$.fn.dialog",arguments),this.click(function(t){t.preventDefault(),t.stopPropagation();var n=e(this).data("dialog-type");"white-box"===n||"box"===n||"remoteview-box"===n?e.dialog(this.href,void 0,n):e.dialog(this.href)})},e.dialog=function(t,n,o,i){function a(t){var n=t.constructor.toString();return n=n.substr("function ".length),n=n.substr(0,n.indexOf("(")),n=e.trim(n)}console.log("$.dialog",arguments,t);var r=i,c=null;switch(!!n&&a(n)){case"Object":n="?"+e.param(n).replace(/%5B%5D/g,"");break;case"Function":c=n,n=null;break;case"String":"Function"===a(o)&&(c=o),o=n,n=null}"box"===o&&(o="white-box"),e.ajax({url:t+(n||""),cache:!1,type:"get",async:!1,beforeSend:function(){e.loader.show(!0)},success:function(t){if(t.returnCode)return meeting.handleDefaultError(t),!1;var n=e("#overlay");if(n.length||(n=e('<div id="overlay" class="'+o+'" style="display: none;"></div>').appendTo(document.body)),e.dialog.dialogObj=e("#dialog"),!e.dialog.dialogObj.length){switch(o){case"white-box":e("body").append(['<div id="dialog-wrap" class="fade dialog-wrapper">','<div id="dialog" class="white-box">','<button type="button" data-btn="dialog-top-close">','<i class="cola-icon-popclose"></i>',"</button>",'<div class="content-wrap"></div>',"</div>","</div>"].join("\n"));break;case"remoteview-box":e("body").append(['<div id="dialog-wrap" class="fade dialog-wrapper">','<div id="dialog" class="white-box remoteview">','<button type="button" data-btn="dialog-top-close">','<i class="cola-icon-popclose"></i>',"</button>",'<div class="content-wrap"></div>',"</div>","</div>"].join("\n"));break;default:e("body").append(['<div id="dialog-wrap" class="fade dialog-wrapper">','<button type="button" data-btn="dialog-top-close"></button>','<div id="dialog" class="full-type">','<div class="content-wrap"></div>',"</div>","</div>"].join("\n"))}e.dialog.dialogObj=e("#dialog")}var i=e("#dialog-wrap");i.hide().find(".content-wrap").html(t).find("input, select").filter(function(){if(e(this).is(":visible")&&!e(this).attr("readonly"))return this}).eq(0).focus(),"hide"!==r&&(e.dialog.afterDialog(i),n.show(),i.show()),c&&c(),e.loader.hide()}})},e.dialog.afterDialog=function(t){setTimeout(function(){e.dialog.center(),t.addClass("in")},1),e("body").addClass("opened-dialog"),e("a, input, textarea, .form-item, .button, button").not(e.dialog.dialogObj.find("a, input, textarea, .form-item, .button, button")).blur(),e.dialog.dialogObj.find(".need-focus").eq(0).focus(),n.keydown(function(n){"block"==t.css("display")&&27==n.keyCode&&e.dialog.close(t)})},e.dialog.center=function(){if(!e.dialog.dialogObj.length)return!1;var t=e("#dialog-wrap");return t.height()<e.dialog.dialogObj.outerHeight(!0)?t.addClass("float-top"):t.removeClass("float-top"),e.dialog.dialogObj.css({top:"10%",left:"50%",marginLeft:-1*e.dialog.dialogObj.outerWidth()/2})},e.dialog.close=function(t){e.dialog.closeCallback&&e.dialog.closeCallback(),e.dialog.closeCallback=null,e("#overlay").remove(),e("#dialog-wrap").removeClass("in").remove(),e("body").removeClass("opened-dialog"),e.dialog.dialogObj=""},e.loader={el:null,overlay:null,isVisible:!1,create:function(){e("body").append(['<div id="loader">',"<span></span> <span></span> <span></span> <span></span>","</div>",'<div id="overlay-for-loader"></div>'].join("\n")),e.loader.el=e("#loader"),e.loader.overlay=e("#overlay-for-loader")},show:function(n){e.loader.el||e.loader.create(),e.loader.el.show(),n&&e.loader.overlay.show(),e.loader.center(),t.on("resize",function(){e.loader.center()}),this.isVisible=!0},hide:function(){var t=e.loader.el,n=e.loader.overlay;t&&"block"==t.css("display")&&t.hide(),n&&"block"==n.css("display")&&n.hide(),this.isVisible=!1},center:function(){var n=e.loader.el;n&&"block"==n.css("display")&&n.css({top:(t.height()-40-n.height())/2,left:(t.width()-n.width())/2})}},function(){e(document).on("click",'#dialog-wrap [data-btn="dialog-top-close"], #dialog-wrap [data-btn="dialog-close"], #dialog-wrap button.close',function(){var t=e(this).closest(".dialog-wrapper");console.log("$wrapper",t),e.dialog.close(t)})}()}(jQuery),function(e){"use strict";console.info("rm.plugin.js loaded.");var t=(e(window),e(document),e("body"));e.msgBox=function(t,n){console.log("msgBox",arguments);var o=e("#msg-box");if(o.hasClass("opened"))return messages.push(t),setTimeout(function(){e.msgBox(messages[0]),messages.shift()},1e3),!1;o.html(t).css({top:0}).addClass("opened"),setTimeout(function(){o.css({top:-o.outerHeight(!0)}).removeClass("opened")},n||3e3)},e.fn.tooltip=function(n){var o,i,a,r,c,s,l,d,u,f=e.extend({},e.fn.tooltip.defaults,n);return e(".tooltip").length||t.append(['<div class="tooltip">','<div class="arrow"></div>','<div class="tooltip-content"></div>',"</div>"].join("\n")),this.each(function(){var t=e(this),n=null;t.offset();t.bind(f.enterEvent,function(){switch(o=e(".tooltip"),i=o.find(".arrow"),o.find(".tooltip-content").text(e.trim(t.attr(f.targetAttr)||t.attr("title"))||f.content),t.attr("title")&&(n=t.attr("title"),t.removeAttr("title")),d="function"==typeof f.placement?f.placement.call(this,o[0],$element[0]):f.placement,a=/in/.test(d),o.remove().css({top:0,left:0,display:"block"}).appendTo(a?e(this):document.body),r=function(n){return e.extend({},n?{top:0,left:0}:t.offset(),{width:t[0].offsetWidth,height:t[0].offsetHeight})}(a),c=o[0].offsetWidth,s=o[0].offsetHeight,r.left<20?(r.left=r.left+16,u=!0):u=!1,a?d.split(" ")[1]:d){case"bottom":l={top:r.top+r.height+i.outerHeight(),left:r.left+r.width/2-c/2};break;case"top":l={top:r.top-s-i.outerHeight(),left:r.left+r.width/2-c/2};break;case"left":l={top:r.top+r.height/2-s/2,left:r.left-c-i.outerWidth()};break;case"right":l={top:r.top+r.height/2-s/2,left:r.left+r.width+i.outerWidth()}}return o.css(l).addClass(d).addClass("in"),o[u?"addClass":"removeClass"]("left-space"),!1}),t.bind(f.leaveEvent,function(e){o&&o.length&&o.css("display")&&(o.hide(),n&&t.attr("title",n))})})},e.fn.tooltip.defaults={enterEvent:"mouseenter mouseover",leaveEvent:"mouseleave mouseout",placement:"bottom",targetAttr:"title"},!!e.fn.target&&console.warn("$.fn.target is already defined"),e.fn.target=function(e){var t=this;t.data("callback")||(t=t.parent());var n=t.data("callback")&&t.data("callback").length?t:"";return n.length?n:null}}(jQuery),$.extend({postJSON:function(e,t,n){return console.log("postJSON",arguments),$.post(e,t,n,"json")},syncGetScript:function(e,t){console.log("getScriptSync",arguments),$.ajax({async:!1,type:"GET",url:e,dataType:"script",success:function(e){t&&t(e)},error:function(e,t,n){console.log("Response Error - "+e.status,t,n)}})},syncGetJSON:function(e,t,n){$.isFunction(t)&&(n=t,t=null),$.ajax({async:!1,type:"GET",url:e,data:t,dataType:"json",success:function(e){n&&n(e)},error:function(e,t,n){console.log("Response Error - "+e.status,t,n)}})}}),$.toJSON=function(e){if("object"==typeof JSON&&JSON.stringify)return JSON.stringify(e);var t=typeof e;if(null===e)return"null";if("undefined"!==t){if("number"===t||"boolean"===t)return e+"";if("string"===t)return $.quoteString(e);if("object"===t){if("function"==typeof e.toJSON)return $.toJSON(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1;n<10&&(n="0"+n);var o=e.getUTCDate();o<10&&(o="0"+o);var i=e.getUTCFullYear(),a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var c=e.getUTCSeconds();c<10&&(c="0"+c);var s=e.getUTCMilliseconds();return s<100&&(s="0"+s),s<10&&(s="0"+s),'"'+i+"-"+n+"-"+o+"T"+a+":"+r+":"+c+"."+s+'Z"'}if(e.constructor===Array){for(var l=[],d=0;d<e.length;d++)l.push($.toJSON(e[d])||"null");return"["+l.join(",")+"]"}var u=[];for(var f in e){var g,p=typeof f;if("number"===p)g='"'+f+'"';else{if("string"!==p)continue;g=$.quoteString(f)}if("function"!=typeof e[f]){var m=$.toJSON(e[f]);u.push(g+":"+m)}}return"{"+u.join(", ")+"}"}}},$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},window.setInterval=function(e){var t=[],n=function(n,o){return t[t.length]=e(n,o)};return n.clearAll=function(){for(var e=t.pop();e;)console.log("타 이 머 클리어 ID",e),clearInterval(e)},n}(window.setInterval);var scriptCache=[],callbackCache=null;window.scriptLoading=function(e,t){var n=0,o=0;for(callbackCache=t,n=0,o=e.length;n<o;n++)scriptCache.push({scriptUrl:e[n],scriptLoaded:!1});domLoading()};
//# sourceMappingURL=rm.global.class.js.map
